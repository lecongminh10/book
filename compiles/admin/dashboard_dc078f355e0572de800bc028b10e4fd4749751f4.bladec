<?php $_shouldextend[1]=1; ?>

<?php $this->startSection('title', 'Trang ch·ªß - Dashboard'); ?>

<?php $this->startSection('content'); ?>
<style>
 .dashboard-overview {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
 gap: 20px;
 margin-bottom: 30px;
 }
 #content{
 padding: 15px;
 }
 
 .overview-card {
 background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
 color: white;
 padding: 20px;
 border-radius: 10px;
 text-align: center;
 box-shadow: 0 4px 6px rgba(0,0,0,0.1);
 transition: transform 0.3s ease;
 }
 
 .overview-card:hover {
 transform: translateY(-5px);
 }
 
 .overview-card h3 {
 margin: 0;
 font-size: 2.5em;
 font-weight: bold;
 }
 
 .overview-card p {
 margin: 10px 0 0 0;
 font-size: 1.1em;
 opacity: 0.9;
 }
 
 .stats-grid {
 display: grid;
 grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
 gap: 20px;
 margin-bottom: 30px;
 }
 
 .stats-box {
 border: 1px solid #ddd;
 border-radius: 8px;
 padding: 20px;
 background: white;
 box-shadow: 0 2px 4px rgba(0,0,0,0.1);
 }
 
 .stats-box h2 {
 margin-top: 0;
 color: #333;
 border-bottom: 2px solid #667eea;
 padding-bottom: 10px;
 }
 
 table {
 width: 100%;
 border-collapse: collapse;
 margin-top: 15px;
 }
 
 th, td {
 border: 1px solid #ddd;
 padding: 8px;
 text-align: left;
 }
 
 th {
 background-color: #f8f9fa;
 font-weight: bold;
 }
 
 tr:nth-child(even) {
 background-color: #f8f9fa;
 }
 
 tr:hover {
 background-color: #e9ecef;
 }
 
 .status-pending { color: #ffc107; font-weight: bold; }
 .status-approved { color: #28a745; font-weight: bold; }
 .status-rejected { color: #dc3545; font-weight: bold; }
 .status-returned { color: #6c757d; font-weight: bold; }
 
 .recent-items {
 max-height: 300px;
 overflow-y: auto;
 }
 
 .rating-stars {
 color: #ffc107;
 }
 
 .empty-data {
 text-align: center;
 color: #6c757d;
 font-style: italic;
 }
</style>

<!-- T·ªïng quan -->
<div class="dashboard-overview">
 <div class="overview-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
 <h3><?php echo \htmlentities($totalBooks??'', ENT_QUOTES, 'UTF-8', false); ?></h3>
 <p>T·ªïng s·ªë s√°ch</p>
 </div>
 <div class="overview-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
 <h3><?php echo \htmlentities($totalUsers??'', ENT_QUOTES, 'UTF-8', false); ?></h3>
 <p>Ng∆∞·ªùi d√πng</p>
 </div>
 <div class="overview-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
 <h3><?php echo \htmlentities($totalBorrowings??'', ENT_QUOTES, 'UTF-8', false); ?></h3>
 <p>L∆∞·ª£t m∆∞·ª£n s√°ch</p>
 </div>
 <div class="overview-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
 <h3><?php echo \htmlentities($totalCategories??'', ENT_QUOTES, 'UTF-8', false); ?></h3>
 <p>Danh m·ª•c s√°ch</p>
 </div>
 <div class="overview-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
 <h3><?php echo \htmlentities($totalPosts??'', ENT_QUOTES, 'UTF-8', false); ?></h3>
 <p>B√†i vi·∫øt</p>
 </div>
 <div class="overview-card" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333;">
 <h3><?php echo \htmlentities($totalShelves??'', ENT_QUOTES, 'UTF-8', false); ?></h3>
 <p>K·ªá s√°ch</p>
 </div>
</div>

<!-- Th·ªëng k√™ ch√≠nh -->
<div class="stats-grid">
 <!-- S√°ch theo danh m·ª•c -->
 <div class="stats-box">
 <h2>üìö S√°ch theo danh m·ª•c</h2>
 <table>
 <tr>
 <th>Danh m·ª•c</th>
 <th>S·ªë l∆∞·ª£ng s√°ch</th>
 </tr>
 <?php $__empty_1 = true; foreach($booksByCategory as $item): $__empty_1 = false; ?>
 <tr>
 <td><?php echo \htmlentities($item['category_name'] ?? 'Kh√¥ng c√≥ danh m·ª•c'??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><strong><?php echo \htmlentities($item['book_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="2" class="empty-data">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>

 <!-- Tr·∫°ng th√°i m∆∞·ª£n s√°ch -->
 <div class="stats-box">
 <h2>üìã Tr·∫°ng th√°i m∆∞·ª£n s√°ch</h2>
 <table>
 <tr>
 <th>Tr·∫°ng th√°i</th>
 <th>S·ªë l∆∞·ª£ng</th>
 </tr>
 <?php $__empty_1 = true; foreach($borrowingsByStatus as $item): $__empty_1 = false; ?>
 <tr>
 <td>
 <span class="status-<?php echo \htmlentities($item['status']??'', ENT_QUOTES, 'UTF-8', false); ?>">
 <?php switch ($item['status']) {
 case ('pending'): ?> Ch·ªù duy·ªát <?php break; ?>
 <?php case ('approved'): ?> ƒê√£ duy·ªát <?php break; ?>
 <?php case ('rejected'): ?> T·ª´ ch·ªëi <?php break; ?>
 <?php case ('returned'): ?> ƒê√£ tr·∫£ <?php break; ?>
 <?php default: ?> <?php echo \htmlentities($item['status']??'', ENT_QUOTES, 'UTF-8', false); ?>

 <?php } // end switch ?>
 </span>
 </td>
 <td><strong><?php echo \htmlentities($item['borrowing_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="2" class="empty-data">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>

 <!-- Ng∆∞·ªùi d√πng theo vai tr√≤ -->
 <div class="stats-box">
 <h2>üë• Ng∆∞·ªùi d√πng theo vai tr√≤</h2>
 <table>
 <tr>
 <th>Vai tr√≤</th>
 <th>S·ªë l∆∞·ª£ng</th>
 </tr>
 <?php $__empty_1 = true; foreach($usersByRole as $item): $__empty_1 = false; ?>
 <tr>
 <td>
 <?php switch ($item['role']) {
 case ('admin'): ?> Qu·∫£n tr·ªã vi√™n <?php break; ?>
 <?php case ('auth'): ?> Th·ªß th∆∞ <?php break; ?>
 <?php case ('user'): ?> Ng∆∞·ªùi d√πng <?php break; ?>
 <?php default: ?> <?php echo \htmlentities($item['role']??'', ENT_QUOTES, 'UTF-8', false); ?>

 <?php } // end switch ?>
 </td>
 <td><strong><?php echo \htmlentities($item['user_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="2" class="empty-data">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>

 <!-- K·ªá s√°ch c√≥ s√°ch -->
 <div class="stats-box">
 <h2>üè† K·ªá s√°ch c√≥ s√°ch</h2>
 <table>
 <tr>
 <th>T√™n k·ªá</th>
 <th>S·ªë s√°ch</th>
 </tr>
 <?php $__empty_1 = true; foreach($shelvesWithBooks as $item): $__empty_1 = false; ?>
 <tr>
 <td><?php echo \htmlentities($item['shelf_name']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><strong><?php echo \htmlentities($item['book_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="2" class="empty-data">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>
</div>

<!-- Th·ªëng k√™ chi ti·∫øt -->
<div class="stats-grid">
 <!-- S√°ch ƒë∆∞·ª£c m∆∞·ª£n nhi·ªÅu nh·∫•t -->
 <div class="stats-box">
 <h2>üèÜ Top s√°ch ƒë∆∞·ª£c m∆∞·ª£n nhi·ªÅu</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>T√™n s√°ch</th>
 <th>T√°c gi·∫£</th>
 <th>L∆∞·ª£t m∆∞·ª£n</th>
 </tr>
 <?php $__empty_1 = true; foreach($mostBorrowedBooks as $item): $__empty_1 = false; ?>
 <tr>
 <td><?php echo \htmlentities($item['title']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['author']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><strong><?php echo \htmlentities($item['borrow_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="3" class="empty-data">Ch∆∞a c√≥ d·ªØ li·ªáu m∆∞·ª£n s√°ch</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>
 </div>

 <!-- Ng∆∞·ªùi d√πng m∆∞·ª£n nhi·ªÅu nh·∫•t -->
 <div class="stats-box">
 <h2>‚≠ê Top ng∆∞·ªùi d√πng t√≠ch c·ª±c</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>H·ªç t√™n</th>
 <th>Username</th>
 <th>L∆∞·ª£t m∆∞·ª£n</th>
 </tr>
 <?php $__empty_1 = true; foreach($mostActiveBorrowers as $item): $__empty_1 = false; ?>
 <tr>
 <td><?php echo \htmlentities($item['full_name']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['username']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><strong><?php echo \htmlentities($item['borrow_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="3" class="empty-data">Ch∆∞a c√≥ d·ªØ li·ªáu m∆∞·ª£n s√°ch</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>
 </div>

 <!-- S√°ch m·ªõi nh·∫•t -->
 <div class="stats-box">
 <h2>üìñ S√°ch m·ªõi nh·∫•t</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>T√™n s√°ch</th>
 <th>T√°c gi·∫£</th>
 <th>Danh m·ª•c</th>
 <th>Ng√†y th√™m</th>
 </tr>
 <?php $__empty_1 = true; foreach($latestBooks as $item): $__empty_1 = false; ?>
 <tr>
 <td><?php echo \htmlentities($item['title']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['author']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['category_name'] ?? 'N/A'??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities(date('d/m/Y', strtotime($item['created_at']))??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="4" class="empty-data">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>
 </div>

 <!-- M∆∞·ª£n s√°ch g·∫ßn ƒë√¢y -->
 <div class="stats-box">
 <h2>üïí M∆∞·ª£n s√°ch g·∫ßn ƒë√¢y</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>Ng∆∞·ªùi m∆∞·ª£n</th>
 <th>S√°ch</th>
 <th>Tr·∫°ng th√°i</th>
 <th>Ng√†y m∆∞·ª£n</th>
 </tr>
 <?php $__empty_1 = true; foreach($recentBorrowings as $item): $__empty_1 = false; ?>
 <tr>
 <td><?php echo \htmlentities($item['full_name']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['title']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td>
 <span class="status-<?php echo \htmlentities($item['status']??'', ENT_QUOTES, 'UTF-8', false); ?>">
 <?php switch ($item['status']) {
 case ('pending'): ?> Ch·ªù duy·ªát <?php break; ?>
 <?php case ('approved'): ?> ƒê√£ duy·ªát <?php break; ?>
 <?php case ('rejected'): ?> T·ª´ ch·ªëi <?php break; ?>
 <?php case ('returned'): ?> ƒê√£ tr·∫£ <?php break; ?>
 <?php default: ?> <?php echo \htmlentities($item['status']??'', ENT_QUOTES, 'UTF-8', false); ?>

 <?php } // end switch ?>
 </span>
 </td>
 <td><?php echo \htmlentities(date('d/m/Y', strtotime($item['created_at']))??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 </tr>
 <?php endforeach; if ($__empty_1): ?>
 <tr>
 <td colspan="4" class="empty-data">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
 </tr>
 <?php endif; ?>
 </table>
 </div>
 </div>
</div>

<!-- Th·ªëng k√™ b·ªï sung -->
<div class="stats-grid">
 <?php if(count($booksByRating) > 0): ?>
 <!-- S√°ch theo ƒë√°nh gi√° -->
 <div class="stats-box">
 <h2>‚≠ê S√°ch theo ƒë√°nh gi√°</h2>
 <table>
 <tr>
 <th>Ti√™u ƒë·ªÅ s√°ch</th>
 <th>ƒê√°nh gi√° trung b√¨nh</th>
 <th>S·ªë l∆∞·ª£t ƒë√°nh gi√°</th>
 </tr>
 <?php $__currentLoopData = $booksByRating; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td><?php echo \htmlentities($item['title']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td>
 <span class="rating-stars">
 <?php for($i = 1; $i <= 5; $i++): ?>
 <?php if($i <= floor($item['avg_rating'])): ?>
 ‚òÖ
 <?php elseif($i <= $item['avg_rating']): ?>
 ‚òÜ
 <?php else: ?>
 ‚òÜ
 <?php endif; ?>
 <?php endfor; ?>
 </span>
 (<?php echo \htmlentities(number_format($item['avg_rating'], 1)??'', ENT_QUOTES, 'UTF-8', false); ?>)
 </td>
 <td><strong><?php echo \htmlentities($item['rating_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 <?php endif; ?>

 <!-- S√°ch theo k·ªá -->
 <?php if(count($booksByShelf) > 0): ?>
 <div class="stats-box">
 <h2>üìö S√°ch theo k·ªá</h2>
 <table>
 <tr>
 <th>T√™n k·ªá</th>
 <th>S·ªë l∆∞·ª£ng s√°ch</th>
 </tr>
 <?php $__currentLoopData = $booksByShelf; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td><?php echo \htmlentities($item['shelf_name'] ?? 'Ch∆∞a x·∫øp k·ªá'??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><strong><?php echo \htmlentities($item['book_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 <?php endif; ?>

 <!-- S√°ch theo nƒÉm xu·∫•t b·∫£n -->
 <?php if(count($booksByYear) > 0): ?>
 <div class="stats-box">
 <h2>üìÖ S√°ch theo nƒÉm xu·∫•t b·∫£n</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>NƒÉm xu·∫•t b·∫£n</th>
 <th>S·ªë l∆∞·ª£ng s√°ch</th>
 </tr>
 <?php $__currentLoopData = $booksByYear; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td><?php echo \htmlentities($item['publish_year']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><strong><?php echo \htmlentities($item['book_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 </div>
 <?php endif; ?>

 <!-- S√°ch n·ªïi b·∫≠t -->
 <?php if(count($featuredBooks) > 0): ?>
 <div class="stats-box">
 <h2>üåü S√°ch n·ªïi b·∫≠t</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>T√™n s√°ch</th>
 <th>T√°c gi·∫£</th>
 <th>Danh m·ª•c</th>
 <th>Ng√†y th√™m</th>
 </tr>
 <?php $__currentLoopData = $featuredBooks; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td><?php echo \htmlentities($item['title']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['author']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['category_name'] ?? 'N/A'??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities(date('d/m/Y', strtotime($item['created_at']))??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 </div>
 <?php endif; ?>
</div>

<!-- Th·ªëng k√™ ng∆∞·ªùi d√πng v√† b√†i vi·∫øt -->
<div class="stats-grid">
 <!-- Ng∆∞·ªùi d√πng m·ªõi nh·∫•t -->
 <?php if(count($latestUsers) > 0): ?>
 <div class="stats-box">
 <h2>üë§ Ng∆∞·ªùi d√πng m·ªõi nh·∫•t</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>H·ªç t√™n</th>
 <th>Username</th>
 <th>Email</th>
 <th>Vai tr√≤</th>
 <th>Ng√†y ƒëƒÉng k√Ω</th>
 </tr>
 <?php $__currentLoopData = $latestUsers; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td><?php echo \htmlentities($item['full_name']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['username']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['email']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td>
 <?php switch ($item['role']) {
 case ('admin'): ?> Qu·∫£n tr·ªã vi√™n <?php break; ?>
 <?php case ('auth'): ?> Th·ªß th∆∞ <?php break; ?>
 <?php case ('user'): ?> Ng∆∞·ªùi d√πng <?php break; ?>
 <?php default: ?> <?php echo \htmlentities($item['role']??'', ENT_QUOTES, 'UTF-8', false); ?>

 <?php } // end switch ?>
 </td>
 <td><?php echo \htmlentities(date('d/m/Y', strtotime($item['created_at']))??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 </div>
 <?php endif; ?>

 <!-- B√†i vi·∫øt theo tr·∫°ng th√°i -->
 <?php if(count($postsByStatus) > 0): ?>
 <div class="stats-box">
 <h2>üìÑ B√†i vi·∫øt theo tr·∫°ng th√°i</h2>
 <table>
 <tr>
 <th>Tr·∫°ng th√°i</th>
 <th>S·ªë l∆∞·ª£ng</th>
 </tr>
 <?php $__currentLoopData = $postsByStatus; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td>
 <?php switch ($item['status']) {
 case ('published'): ?> ƒê√£ xu·∫•t b·∫£n <?php break; ?>
 <?php case ('draft'): ?> B·∫£n nh√°p <?php break; ?>
 <?php case ('pending'): ?> Ch·ªù duy·ªát <?php break; ?>
 <?php default: ?> <?php echo \htmlentities($item['status']??'', ENT_QUOTES, 'UTF-8', false); ?>

 <?php } // end switch ?>
 </td>
 <td><strong><?php echo \htmlentities($item['post_count']??'', ENT_QUOTES, 'UTF-8', false); ?></strong></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 <?php endif; ?>

 <!-- B√†i vi·∫øt m·ªõi nh·∫•t -->
 <?php if(count($latestPosts) > 0): ?>
 <div class="stats-box">
 <h2>üì∞ B√†i vi·∫øt m·ªõi nh·∫•t</h2>
 <div class="recent-items">
 <table>
 <tr>
 <th>Ti√™u ƒë·ªÅ</th>
 <th>T√°c gi·∫£</th>
 <th>Danh m·ª•c</th>
 <th>Ng√†y t·∫°o</th>
 </tr>
 <?php $__currentLoopData = $latestPosts; $this->addLoop($__currentLoopData);$this->getFirstLoop();
 foreach($__currentLoopData as $item): $loop = $this->incrementLoopIndices();  ?>
 <tr>
 <td><?php echo \htmlentities($item['title']??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['author_name'] ?? 'N/A'??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities($item['category_name'] ?? 'N/A'??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 <td><?php echo \htmlentities(date('d/m/Y', strtotime($item['created_at']))??'', ENT_QUOTES, 'UTF-8', false); ?></td>
 </tr>
 <?php endforeach; $this->popLoop(); $loop = $this->getFirstLoop(); ?>
 </table>
 </div>
 </div>
 <?php endif; ?>
</div>

<?php $this->stopSection(); ?>
<?php if (isset($_shouldextend[1])) { echo $this->runChild('layouts.master'); } ?>